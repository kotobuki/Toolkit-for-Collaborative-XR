{"components": [], "type": "atom", "versions": "Beta", "units": [], "hats": [], "stamps": [], "blockly": "<variables><variable id=\"WBGYAPV?4?b$49HOu(wl\">attribute_name</variable><variable id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</variable><variable id=\"@AZST,z`EUu^)DL-[Lzt\">current_state</variable><variable id=\"tbVg2(V:0F56zW03H+iE\">next_state</variable></variables><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"10\" y=\"10\"><comment pinned=\"false\" h=\"80\" w=\"160\">This section will be executed only once</comment><next><block type=\"wifi_doConnect\" id=\"vbJ]ko0i82ifr8MDLFg$\"><comment pinned=\"false\" h=\"80\" w=\"160\">Replace SSID and PASS with yours</comment><value name=\"apiKey\"><shadow type=\"text\" id=\"r`5@|gB+(FPvTMh!JN;7\"><field name=\"TEXT\">WIFI_SSID</field></shadow></value><value name=\"Msg\"><shadow type=\"text_password\" id=\"iPoq?A%GFxTQz29V#HD~\"><field name=\"TEXT\">WIFI_PASSWORD</field></shadow></value><next><block type=\"controls_if\" id=\"[{v{[1}@D6trYx|bL7wG\"><value name=\"IF0\"><block type=\"wifi_isconnect\" id=\"|d~v`}%Nh:tCf/t18i31\" /></value><statement name=\"DO0\"><block type=\"rgb_set_all_input\" id=\",nUCw?.)3x[IpW_O2:XR\"><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"a)A8?7gX|5Xy16KV|q9v\"><mutation mode=\"palette\" /><field name=\"MODE\">palette</field><field name=\"COLOR\">#33ff33</field></block></value></block></statement><next><block type=\"variables_set\" id=\"n*^,Dc;|$a[cao.b?Dmx\"><field name=\"VAR\" id=\"WBGYAPV?4?b$49HOu(wl\">attribute_name</field><value name=\"VALUE\"><block type=\"text\" id=\"0lQHHwrI7cM~(GP?dtYj\"><field name=\"TEXT\">state</field><comment pinned=\"false\" h=\"80\" w=\"160\">Replace 'state' with your real attribute name</comment></block></value><next><block type=\"variables_set\" id=\"impOedI^|zzb97P4+Uyj\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field><value name=\"VALUE\"><block type=\"text\" id=\"EFPhRfsGbX)a2zO`F|EE\"><field name=\"TEXT\">BASE_URL</field><comment pinned=\"false\" h=\"80\" w=\"160\">Replace BASE_URL with your Base URL</comment></block></value><next><block type=\"variables_set\" id=\"IGCCMOl{D_7pzNHbl*9L\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field><value name=\"VALUE\"><block type=\"text_add\" id=\"Fu8jZb#`K]h5}RcD)M-_\"><value name=\"arg0\"><shadow type=\"text\"><field name=\"TEXT\" /></shadow><block type=\"variables_get\" id=\",u3L$$+YIYp=}[EeetSd\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field></block></value><value name=\"arg1\"><block type=\"text\" id=\"~saIcWX=:]f)w!J5.wYW\"><field name=\"TEXT\">/update_attribute</field></block></value></block></value><next><block type=\"variables_set\" id=\"L6|:IY?7`d2@26sL./tV\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field><value name=\"VALUE\"><block type=\"text_add\" id=\"j3xW#rl:Qc{H}5Bf0Lsc\"><value name=\"arg0\"><shadow type=\"text\" id=\"$#BiKwW7Xn1]Go^yy$)^\"><field name=\"TEXT\" /></shadow><block type=\"variables_get\" id=\"|,Yy3(Dku:*[50,3oP#p\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field></block></value><value name=\"arg1\"><block type=\"text_add\" id=\"Ew=]]SCl03K=6m4h1-85\"><value name=\"arg0\"><shadow type=\"text\" id=\".XpkeswNqso.R~-l(~sd\"><field name=\"TEXT\">?api_key=</field></shadow></value><value name=\"arg1\"><block type=\"text\" id=\"ve*e(,{*0lu);LJw330W\"><field name=\"TEXT\">API_KEY</field><comment pinned=\"false\" h=\"80\" w=\"160\">Replace API_KEY with your API key</comment></block></value></block></value></block></value><next><block type=\"variables_set\" id=\"lk,tBt7b9n{m!~SWnTmb\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field><value name=\"VALUE\"><block type=\"text_add\" id=\"g%bc9#:@sn1b*HSg{H98\"><value name=\"arg0\"><shadow type=\"text\"><field name=\"TEXT\" /></shadow><block type=\"variables_get\" id=\"]v(LWkRU#qOhx*7bxL,-\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field></block></value><value name=\"arg1\"><block type=\"text_add\" id=\"f3k%hCjLD*%$z@U;5bmh\"><value name=\"arg0\"><shadow type=\"text\" id=\"FD*3d|%(#p(.!u-1Vbiv\"><field name=\"TEXT\">&amp;item_id=</field></shadow></value><value name=\"arg1\"><block type=\"text\" id=\"671osAf~|RLB~=Sq^!dm\"><field name=\"TEXT\">ITEM_ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">Replace ITEM_ID with your item's ID</comment></block></value></block></value></block></value><next><block type=\"variables_set\" id=\";$T%f58p^s]i-/T%9:t.\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field><value name=\"VALUE\"><block type=\"text_add\" id=\"6m7M(,y0|x5S:2;G-am;\"><value name=\"arg0\"><shadow type=\"text\"><field name=\"TEXT\" /></shadow><block type=\"variables_get\" id=\"HY}^Q+y.He}TMO=Ry22z\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field></block></value><value name=\"arg1\"><block type=\"text_add\" id=\"3rI:ksyP+lDDSb:A$HIj\"><value name=\"arg0\"><shadow type=\"text\" id=\"XRSx:_NFaqNak0DTJF2j\"><field name=\"TEXT\">&amp;attribute=</field></shadow></value><value name=\"arg1\"><block type=\"text_add\" id=\"W,(NP10+]u`TSfF#^Bi%\"><value name=\"arg0\"><shadow type=\"text\" id=\"mVm!2E(fpi[qX{o}TMJb\"><field name=\"TEXT\">state</field></shadow><block type=\"variables_get\" id=\"_uXJ0NXg+_DhAoB}%U4w\"><field name=\"VAR\" id=\"WBGYAPV?4?b$49HOu(wl\">attribute_name</field></block></value><value name=\"arg1\"><block type=\"text\" id=\"Q$$V(C,wY5uElsoEzXna\"><field name=\"TEXT\">%3D</field><comment pinned=\"false\" h=\"80\" w=\"160\">%3D means '=' in URL encoding.</comment></block></value></block></value></block></value></block></value><next><block type=\"variables_set\" id=\"!`j6EeAXVk.XYo?IZ4E-\"><field name=\"VAR\" id=\"@AZST,z`EUu^)DL-[Lzt\">current_state</field><value name=\"VALUE\"><block type=\"text\" id=\"KbCI0ubiZ:U:;%ggN.q-\"><field name=\"TEXT\">off</field></block></value><next><block type=\"basic_on_loop\" id=\"B}L]K6fCrsPL#f$y~Z+_\"><comment pinned=\"false\" h=\"80\" w=\"160\">This section will be executed repeatedly</comment><statement name=\"LOOP\"><block type=\"controls_if\" id=\"^K/SRa]41VAwgo}m~UmG\"><value name=\"IF0\"><block type=\"button_state\" id=\";J0*UGa}^rs}1$,%lb+`\"><field name=\"BUTTON\">A</field><field name=\"EVENT\">wasPressed</field></block></value><statement name=\"DO0\"><block type=\"controls_ifelse\" id=\"I8WrL-yMJ1.,(_GFpf!;\"><comment pinned=\"false\" h=\"80\" w=\"160\">Set next state based on the current state</comment><value name=\"IF0\"><block type=\"logic_compare\" id=\"VXMU];Ba,vI:~OuP]1aW\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"u/vCu1p#t}8g.%aB]Xyd\"><field name=\"VAR\" id=\"@AZST,z`EUu^)DL-[Lzt\">current_state</field></block></value><value name=\"B\"><block type=\"text\" id=\"oI]0KP.JBUrINB%f8OF8\"><field name=\"TEXT\">off</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"67O$,N!^r$Z]}5I!tK-o\"><field name=\"VAR\" id=\"tbVg2(V:0F56zW03H+iE\">next_state</field><value name=\"VALUE\"><block type=\"text\" id=\"ytHZIwe0K1;3D}uyER#0\"><field name=\"TEXT\">on</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\" id=\"(SkL#m4E~TaPw2t@j~}K\"><field name=\"VAR\" id=\"tbVg2(V:0F56zW03H+iE\">next_state</field><value name=\"VALUE\"><block type=\"text\" id=\"LhUHW9*~jisq1docMF.:\"><field name=\"TEXT\">off</field></block></value></block></statement><next><block type=\"rgb_set_all_input\" id=\"d~sWC45vRYPF|;:TM7O;\"><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"yv4V2F_TmgE-R3HIahVT\"><mutation mode=\"palette\" /><field name=\"MODE\">palette</field><field name=\"COLOR\">#ffff00</field></block></value><next><block type=\"http_request\" id=\"q.!lsW!+dTs{8ZZGppD;\"><field name=\"method\">GET</field><value name=\"url\"><shadow type=\"text\" id=\"7r+BRNk|cOo-Dw=+%$Zp\"><field name=\"TEXT\" /></shadow><block type=\"text_add\" id=\"/bkG^T%2adnp^upoy*5X\"><value name=\"arg0\"><shadow type=\"text\" id=\"@7GG_@LvQ$;n37p(_/qB\" disabled=\"true\"><field name=\"TEXT\" /></shadow><block type=\"variables_get\" id=\"I=j.TW:k*rkq_zE}t;+D\"><field name=\"VAR\" id=\"*b4/jJ1gqhKdQ9SRMFy+\">URL</field></block></value><value name=\"arg1\"><block type=\"variables_get\" id=\"ZZ[)vo3{oydE52^L9(Tf\"><field name=\"VAR\" id=\"tbVg2(V:0F56zW03H+iE\">next_state</field></block></value></block></value><statement name=\"success\"><block type=\"controls_if\" id=\"_p-J_y5[~ULduWCKYhd$\"><comment pinned=\"false\" h=\"80\" w=\"160\">If successfully updated, update the current state.</comment><value name=\"IF0\"><block type=\"logic_compare\" id=\"R#a/d904*rDK)93A1Ly;\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"get_status_code\" id=\"qfHMS7vJw2{^b:Tj*A0B\" /></value><value name=\"B\"><block type=\"math_number\" id=\"#qBNQo{n30YU.^0HkoyH\"><field name=\"NUM\">200</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"{b6K88NI*a5HS*)PUgNU\"><field name=\"VAR\" id=\"@AZST,z`EUu^)DL-[Lzt\">current_state</field><value name=\"VALUE\"><block type=\"get_data\" id=\"BOa2bzJA!u-d[#~LS1@u\" /></value><next><block type=\"controls_if\" id=\"I_8}FXY^w:Zn)$V$eEou\"><mutation elseif=\"1\" /><value name=\"IF0\"><block type=\"logic_compare\" id=\"zU+29o2mSAC}/1PA,,E]\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"cz,}7W,pEh]39c/}@EO,\"><field name=\"VAR\" id=\"@AZST,z`EUu^)DL-[Lzt\">current_state</field></block></value><value name=\"B\"><block type=\"text\" id=\"]G*3*U0,V(@BCM.f%f$K\"><field name=\"TEXT\">on</field></block></value></block></value><statement name=\"DO0\"><block type=\"rgb_set_all_input\" id=\"PHe;(O2f_%_=UN`V$bx-\"><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"G![`JA5y^2Zlc@rf]yGA\"><mutation mode=\"palette\" /><field name=\"MODE\">palette</field><field name=\"COLOR\">#ffffff</field></block></value></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"nu}10n[1DME?7x|-.7Ld\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"VGq3I[i|o.K/W{bw7tW/\"><field name=\"VAR\" id=\"@AZST,z`EUu^)DL-[Lzt\">current_state</field></block></value><value name=\"B\"><block type=\"text\" id=\"8RN9R{N{84`-s{-.n~z4\"><field name=\"TEXT\">off</field></block></value></block></value><statement name=\"DO1\"><block type=\"rgb_set_all_input\" id=\"De0{}xBeS-R2TK8BbPic\"><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"K^sCNW;X0:T$kz8#ICUt\"><mutation mode=\"palette\" /><field name=\"MODE\">palette</field><field name=\"COLOR\">#000000</field></block></value></block></statement></block></next></block></statement></block></statement><statement name=\"fail\"><block type=\"rgb_set_all_input\" id=\"_Ia(m6a3%6i^XkIo**nj\"><value name=\"COLOR\"><block type=\"color_rgb_palette\" id=\"B^?pZ^5Kte0cXe%|Ryx{\"><mutation mode=\"palette\" /><field name=\"MODE\">palette</field><field name=\"COLOR\">#ff0000</field></block></value></block></statement></block></next></block></next></block></statement><next><block type=\"timer_delay_ms\" id=\"#iH~dHjG#WY4Soz0!*vA\"><value name=\"DELAY\"><shadow type=\"math_number\" id=\"={^ow*$gLC,UPKldT=Vg\"><field name=\"NUM\">100</field></shadow></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block>", "Blockly.Remotes": [], "Blockly.RemotePlus": [{"id": "__title", "blockId": "", "createTime": 1697347310100, "name": "M5RemoteTitle", "dragAndDrop": false, "resizable": false, "options": {"minWidth": 1, "minHeight": 1, "maxWidth": 6, "maxHeight": 10, "defaultWidth": 2, "defaultHeight": 1}, "w": 2, "h": 1, "bgColor": "#0080FF", "color": "#fff", "fontsize": "M", "label": "M5Remote", "interval": 3000, "code": "", "event": "", "dataSource": "none", "ezdataToken": "SIDJQXV2VZtGhGzNH17UVnHK7SYHFmwY", "topic": "", "needShadow": false, "type": "title", "x": 0, "y": 0}], "modules": ["rgb", "machine"], "cbIdList_": [], "eventCBIdList_": [], "apikey": "", "uuid": ""}